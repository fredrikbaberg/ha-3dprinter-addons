#!/usr/bin/with-contenv bashio

bashio::log.info "Starting Klipper..."

KLIPPER_PYTHON=/data/klippy-env/bin/python
KLIPPY=/data/klipper/klippy/klippy.py
KLIPPER_CFG=/data/klipper_config/printer.cfg
KLIPPY_LOGFILE=/tmp/klippy.log
KLIPPY_UDS=/tmp/klippy_uds

mkdir -p /data/klipper_config

touch ${KLIPPY_LOGFILE}
touch ${KLIPPER_CFG}

exec ${KLIPPER_PYTHON} ${KLIPPY} ${KLIPPER_CFG} -l ${KLIPPY_LOGFILE} -a ${KLIPPY_UDS}
